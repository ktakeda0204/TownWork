<!DOCTYPE html>
<html>
  <head>
    <title>Town workの旅</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../CSS/style.css">
</head>

<body>
  <h1>TCP/IPの基本のキ</h1>
  <h3>3ウェイシェイクハンド</h3>
  TCPで通信を開始する際に、合計3つのパケットを送受信して必要なデータのやり取りをする。まず、一つ目はクライアント側からSYN（SYnchronize）パケットを送り、シーケンス番号を
  伝達する。サーバー側はそれを受信するとSYNパケットとACKパケットを使って確認応答番号を、ウィンドウサイズを伝達する。
  そして最後に、それを受信したクライアント側がACKパケットを送り、ウィンドウサイズの伝達を行い、コネクションが確立する。


  <h3>ジャンボフレーム</h3>
  Ethernet規格では、データ（ペイロード）を送信するためのデータ構造をフレームと呼び、1フレームで送信できるデータサイズは最大1500 byteである。
  （Ethernetのヘッダーは14Byte、トレイラーは4Byte付加される。）
  しかし、ジャンボフレームではデータサイズを9KByte以上の大きさで送信することが可能になり、ネットワークのパフォーマンスを向上させる事が可能となっている。
  
  <h3>IPフラグメンテーション</h3>
  送信しようとしたIPパケットのサイズと、その経路のMTUを比較して超えていなければそのまま送信する。
  もし、超えていれば経路を通るようなサイズまで分割し、受信側でそれは再構築する。
  フラグメント化された場合は、

  <h3>シーケンス番号、確認番号</h3>
  <ul>
    <li>シーケンス番号：SEQ</li>
    <li>確認応答番号：ACK</li>
  </ul>
  どちらもTCPヘッダーに含まれる情報で、再送制御に用いられている。簡単のために、送信側A、受信側Bとしてデータのやり取りを考える。
  SEQはの初期値は初めの3ハンドシェイクの際に決める。
  SEQ#=1、ACK#=1の初期値を持ち500バイトずつに元データを区切って送ると仮定する。
  送信側のTCPではアプリケーションから渡されたデータは1バイト刻みでシーケンス番号を振っていて、
  TCPヘッダーに対しては一番初めのシーケンス番号のみを記述する。
  一度送信するとシーケンス番号#1から#500までの合計500バイトを送信することになり、次の送信の際にはシーケンス番号が#501からのデータを送信することになる。</p>

  確認応答番号ACKは、シーケンス番号に受信したバイト数を足した数になる。
  つまりACK番号-1までのデータはシーケンス番号通り受信できたということを示し、ACK番号のデータを次に送信してもよいということを示している。

  <h3>Bad TCP</h3>
  Wiresharkでモニタリングしている場合に表示されるエラーメッセージをまとめる。
  <ul>
    <li>TCP Retransmit：受信側からACKが返って来なかった場合、TCPの再送制御により再送されたパケットに対して表示される。ACKを受け取れなかった、とするタイムアウト値は別途指定することができる。</li>
    <li></li>
    <li></li>
  </ul>
  
  TCP Retransmit</p>
  受信側からACKが返って来なかった場合、TCPの再送制御により再送されたパケットに対して表示される。
  ACKを受け取れなかった、とするタイムアウト値は別途指定することができる。

  TCP DupACK</p>
  受信側はACK番号に次に期待するシーケンス番号に等しい番号を格納してACKを返す。
  しかしパケットロスなどの影響により、送信側から期待するシーケンス番号よりも大きな値のパケットが送られてきた場合、
  さきほど送信したACKをもう一度送り受信側が想定しているシーケンス番号を伝える。これをDuplicate ACKと呼ぶ。

  TCP Fast Retransmit</p>
  データ送信側がDupACKを複数回受信すると、タイムアウトを待たずに要求されているパケットを再送する。
  これをFast Retransmitと呼ぶ。
  この複数回、という値は別途設定する事ができる。

</body>
