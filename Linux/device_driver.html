<!DOCTYPE html>
<html>
  <head>
    <title>Town workの旅</title>
    <meta charset="utf-8" />
    
    <link rel="stylesheet" href="../CSS/style.css">
  </head>

  
<body>
  <h2>カーネル空間</h2>
  カーネル用の仮想アドレス空間のこと。
  
  <h2>デバイスドライバ</h2>
  ユーザーアプリケーションとハードウェアシステムの仲介を行うソフトウェアで、カーネル空間で動作する。
　ユーザー空間で操作するアプリケーションは、直接デバイスを制御できず、ユーザー空間とカーネル空間の標準的なインターフェースである
  POSIXを利用してデバイスドライバにデータを依頼する。

  <h2>POSIX</h2>
  Portable Operating System Interface。ユーザー空間とカーネル空間の境界で、アプリケーションから見てOSがどの様に見えるかを決めているのがPOSIXインターフェースである。
  Linuxカーネルのバージョンアップデートが行われても、POSIXに準拠したアプリケーション・プログラムであれば、10年以上前のアプリケーションであっても
  最新のカーネル上で動作させる事が出来る。
  <p>ユーザー空間からカーネル機能を呼び出すには、システムコールを用いる。
  </p>
  
      <h3>ファイル操作</h3>
      キャラクタ型ドライバは、file_operations構造体を用いてデバイス番号とデバイス操作の対応付を行う。
      主にシステムコールを実装する役目を持っていてopen、read等の名前を持っている。a

        <h4>PCIドライバの登録</h4>
        PCIドライバはstruct pci_drive構造体を通じてカーネルに登録する必要がある。以下の4つのフィールドは最低限初期化しなければならないもの。
          <ul>
            <li>name：デバイスドライバの名前</li>
            <li>id_table：pci_device_idへのポインタ</li>
            <li>probe：PCIドライバ内のプローブ関数へのポインタを格納する。このドライバが制御するだとうと韓山したpci_devを見つけた時にPCIコアがこの関数を呼び出す。</li>
            <li>remove：pci_devがシステムから削除されるとき、もしくはPCIドライバがカーネルからアンロードされる時にPCIコアが呼び出す関数へのポインタ</li>
          </ul>
      
      <h3>PCIコア</h3>
      実際にPCIバスと通信するアーキテクチャ固有のコードの助けを借りて、全てのPCIデバイスについて、PCIアドレス空間の検索を行う。
      PCIデバイスが見つかったらPCIコアは新しいstruct pci_dev型の変数をメモリに作成する。
      
      <h3></h3>
</body>
</html>

